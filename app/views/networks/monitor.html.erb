<h1>Network Monitor <%= @network.name %></h1>
<p>
  The monitor has created a temporary device on your network which will be automatically removed after a period of inactivity. Refresh this page if it stops working.
</p>
<table id='monitor_table' class='table'>
  <thead>
    <tr>
      <th>Source</th>
      <th>DDC</th>
      <th>Timestamp</th>
      <th>Message</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
<% content_for(:header) do %>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.1.0/paho-mqtt.min.js'></script>
<% end %>
<% content_for(:title) do 'Network monitor' end %>
<script>
  let monitor_params = {
    broker: {
      username: '<%= @broker[:username] %>', 
      password:  '<%= @broker[:username] %>', 
      server: '<%= @broker[:server] %>',
      port: <%= @broker[:port] %>, 
      client_id: '<%= @broker[:client_id] %>'
    },
    ddcs: [ 
<% @consume_ddcs.each do |ddc| %>
    '<%= ddc %>',
<% end %>
    ]
  };
</script>
